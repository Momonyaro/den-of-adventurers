[gd_scene load_steps=29 format=3 uid="uid://f64ofd2jr8sn"]

[ext_resource type="Script" path="res://Scripts/Data/DataContainer.gd" id="1_8246l"]
[ext_resource type="Script" path="res://Scripts/Data/TimerContainer.gd" id="2_dls8v"]
[ext_resource type="Script" path="res://Scripts/Managers/GameManager.gd" id="2_tfev1"]
[ext_resource type="Script" path="res://Scripts/Managers/SettingsManager.gd" id="3_pb3he"]
[ext_resource type="Script" path="res://Scripts/Managers/AdventurerManager.gd" id="3_q8kab"]
[ext_resource type="Script" path="res://Scripts/Managers/ActivityManager.gd" id="3_ue1fi"]
[ext_resource type="Script" path="res://Scripts/Activities/BedActivity.gd" id="4_a3onc"]
[ext_resource type="Script" path="res://Scripts/Data/DataStore.gd" id="4_fckrr"]
[ext_resource type="Script" path="res://Scripts/Managers/AgentManager.gd" id="4_uo78h"]
[ext_resource type="FontFile" uid="uid://dinw4r8yhno6k" path="res://Fonts/ArgentPixelCF-Regular.otf" id="5_lyn1g"]
[ext_resource type="Script" path="res://Scripts/Managers/RequestManager.gd" id="6_abixe"]
[ext_resource type="Script" path="res://Scripts/Activities/LeaveActivity.gd" id="6_pdokr"]
[ext_resource type="PackedScene" uid="uid://daoo1s5dlp1si" path="res://Scenes/UI/ui.tscn" id="6_xnocw"]
[ext_resource type="PackedScene" uid="uid://06sse8nkfhmp" path="res://Models/bed.glb" id="9_cqd85"]
[ext_resource type="Script" path="res://addons/persistence_node/persistence_node.gd" id="12_ebu0n"]
[ext_resource type="PackedScene" uid="uid://cspjx814ecba8" path="res://Models/chair.glb" id="16_d6hij"]
[ext_resource type="PackedScene" uid="uid://kv0j1ytnhqui" path="res://Models/dining_table.glb" id="17_1jl0l"]
[ext_resource type="PackedScene" uid="uid://drexe03sykd00" path="res://Models/wall_p_1.glb" id="18_p63jj"]

[sub_resource type="Gradient" id="Gradient_6sds3"]
offsets = PackedFloat32Array(0, 0.569288, 1)
colors = PackedColorArray(0.180392, 0.223529, 0.298039, 1, 0.469994, 0.54512, 0.701762, 0.976471, 1, 1, 1, 0.54902)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_ovn72"]
gradient = SubResource("Gradient_6sds3")

[sub_resource type="Curve" id="Curve_gyyo7"]
max_value = 1.2
_data = [Vector2(0, 0), 0.0, -0.0337155, 0, 0, Vector2(0.846607, 1.2), -0.445042, -0.445042, 0, 0, Vector2(1, 0), -22.1941, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_6wmik"]
curve = SubResource("Curve_gyyo7")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_v047h"]
lifetime_randomness = 0.13
particle_flag_align_y = true
particle_flag_rotate_y = true
direction = Vector3(1.25, 2.08165e-12, 2.08165e-12)
spread = 70.38
gravity = Vector3(2.08165e-12, 1, 2.08165e-12)
initial_velocity_min = 0.06
initial_velocity_max = 0.1
angle_min = -17.9
angle_max = 26.8
scale_curve = SubResource("CurveTexture_6wmik")
color = Color(0.180392, 0.223529, 0.298039, 1)
color_ramp = SubResource("GradientTexture1D_ovn72")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_hj15a"]
transparency = 1
shading_mode = 0
albedo_color = Color(0.729412, 0.776471, 0.854902, 0.831373)

[sub_resource type="TextMesh" id="TextMesh_5yyk0"]
material = SubResource("StandardMaterial3D_hj15a")
uv2_padding = 1.46
text = "Z"
font = ExtResource("5_lyn1g")
font_size = 24
depth = 0.02

[sub_resource type="Environment" id="Environment_wun1a"]
background_mode = 1
background_color = Color(0.505882, 0.807843, 0.509804, 1)
ambient_light_source = 2
ambient_light_color = Color(0.290196, 0.337255, 0.439216, 1)
ambient_light_energy = 0.0
tonemap_white = 1.74

[sub_resource type="NavigationMesh" id="NavigationMesh_av4e2"]
vertices = PackedVector3Array(-3.5, 0.010393, -2.75, -3.25, 0.010393, -2.75, -3, 0.010393, -3.25, -9.25, 0.010393, -1.5, -3.5, 0.010393, -1.25, -3.5, 0.010393, -2.75, -3, 0.010393, -3.25, -2.5, 0.010393, -3.25, -2.5, 0.010393, -9.25, -9.25, 0.010393, -1.5, -3.5, 0.010393, -2.75, -3, 0.010393, -3.25, -2.5, 0.010393, -9.25, -9.25, 0.010393, -9.25, 0, 0.010393, -2, 0, 0.010393, -1.75, 0.5, 0.010393, -1.5, -1.75, 0.010393, -2.75, -1.75, 0.010393, -2, 0, 0.010393, -2, -2.5, 0.010393, -3.25, -1.75, 0.010393, -2.75, 0, 0.010393, -2, -2.5, 0.010393, -9.25, 0.5, 0.010393, -1.5, 0.5, 0.010393, -0.5, 9.25, 0.010393, -0.5, -2.5, 0.010393, -9.25, 0, 0.010393, -2, 0.5, 0.010393, -1.5, 9.25, 0.010393, -0.5, 9.25, 0.010393, -9.25, -9.25, 0.010393, 2, -3.5, 0.010393, 1.75, -3.5, 0.010393, -1.25, -9.25, 0.010393, -1.5, 0.5, 0.010393, 0.25, 0, 0.010393, 0.5, 0, 0.010393, 0.75, -1.5, 0.010393, 3.25, -2, 0.010393, 3.5, -2, 0.010393, 3.75, 0, 0.010393, 0.75, -1.5, 0.010393, 0.75, -1.5, 0.010393, 3.25, 0.5, 0.010393, 0.25, 0, 0.010393, 0.75, -1.5, 0.010393, 3.25, -2.5, 0.010393, 9.25, 9.25, 0.010393, 9.25, 9.25, 0.010393, -0.5, -2, 0.010393, 3.75, -2.5, 0.010393, 3.75, -2.5, 0.010393, 9.25, -1.5, 0.010393, 3.25, -2, 0.010393, 3.75, -2.5, 0.010393, 9.25, 9.25, 0.010393, -0.5, 0.5, 0.010393, -0.5, 0.5, 0.010393, 0.25, -3, 0.010393, 3.75, -3.25, 0.010393, 3.25, -3.5, 0.010393, 3.25, -2.5, 0.010393, 9.25, -2.5, 0.010393, 3.75, -3, 0.010393, 3.75, -3.5, 0.010393, 3.25, -3.5, 0.010393, 1.75, -9.25, 0.010393, 2, -2.5, 0.010393, 9.25, -3, 0.010393, 3.75, -3.5, 0.010393, 3.25, -9.25, 0.010393, 2, -9.25, 0.010393, 9.25)
polygons = [PackedInt32Array(2, 1, 0), PackedInt32Array(5, 4, 3), PackedInt32Array(8, 7, 6), PackedInt32Array(10, 9, 11), PackedInt32Array(11, 9, 12), PackedInt32Array(12, 9, 13), PackedInt32Array(16, 15, 14), PackedInt32Array(19, 18, 17), PackedInt32Array(21, 20, 22), PackedInt32Array(22, 20, 23), PackedInt32Array(26, 25, 24), PackedInt32Array(28, 27, 29), PackedInt32Array(29, 27, 31), PackedInt32Array(29, 31, 30), PackedInt32Array(33, 32, 34), PackedInt32Array(34, 32, 35), PackedInt32Array(38, 37, 36), PackedInt32Array(41, 40, 39), PackedInt32Array(44, 43, 42), PackedInt32Array(46, 45, 47), PackedInt32Array(47, 45, 48), PackedInt32Array(48, 45, 50), PackedInt32Array(48, 50, 49), PackedInt32Array(53, 52, 51), PackedInt32Array(56, 55, 54), PackedInt32Array(59, 58, 57), PackedInt32Array(62, 61, 60), PackedInt32Array(65, 64, 63), PackedInt32Array(68, 67, 66), PackedInt32Array(70, 69, 71), PackedInt32Array(71, 69, 73), PackedInt32Array(71, 73, 72)]
cell_height = 0.01
agent_height = 1.0
agent_radius = 0.75
agent_max_climb = 0.0
agent_max_slope = 14.12
region_min_size = 5.0
region_merge_size = 17.0
edge_max_length = 17.0
edge_max_error = 0.62
vertices_per_polygon = 8.0
detail_sample_distance = 8.06

[sub_resource type="PlaneMesh" id="PlaneMesh_wambb"]

[node name="Root" type="Node3D"]
script = ExtResource("1_8246l")

[node name="SettingsMngr" type="Node" parent="."]
script = ExtResource("3_pb3he")

[node name="Settings" type="Node" parent="SettingsMngr"]
script = ExtResource("12_ebu0n")
folder_name = ""
file_name = "settings"
mode = 1

[node name="DataStore" type="Node" parent="."]
script = ExtResource("4_fckrr")

[node name="HOT_DRIVE" type="Node" parent="DataStore"]
script = ExtResource("12_ebu0n")
file_name = "save"
store_objects = true

[node name="Game" type="Node" parent="."]
script = ExtResource("2_tfev1")

[node name="Activities" type="Node" parent="."]
unique_name_in_owner = true
script = ExtResource("3_ue1fi")

[node name="BedActivity4" type="Node3D" parent="Activities"]
transform = Transform3D(-0.0590807, 0, 0.998253, 0, 1, 0, -0.998253, 0, -0.0590807, -1.74245, 0.1, 2.24885)
script = ExtResource("4_a3onc")

[node name="START_POINT" type="Node3D" parent="Activities/BedActivity4"]
transform = Transform3D(0.999999, 0, -3.8743e-07, 0, 0.999999, 0, 8.9407e-08, 0, 0.999999, 0.779314, -0.0831673, 0.316373)

[node name="ACTIVITY_POINT" type="Node3D" parent="Activities/BedActivity4"]
transform = Transform3D(1, 0, -2.38419e-07, 0, 1, 0, 5.96046e-08, 0, 1, -0.000793219, 0.200576, 0.182067)

[node name="ZZZParticles" type="GPUParticles3D" parent="Activities/BedActivity4"]
transform = Transform3D(0.999999, 0, 0, 0, 0.999999, 0, 1.49012e-07, 0, 1, -0.0305171, 0.477519, -0.313852)
emitting = false
amount = 4
lifetime = 1.2
visibility_aabb = AABB(-0.586999, -0.965922, -1.08275, 1.174, 1.93182, 2.16551)
transform_align = 3
trail_lifetime = 0.8
process_material = SubResource("ParticleProcessMaterial_v047h")
draw_pass_1 = SubResource("TextMesh_5yyk0")

[node name="bed" parent="Activities/BedActivity4" instance=ExtResource("9_cqd85")]
transform = Transform3D(0.45, 0, 7.45058e-08, 0, 0.45, 0, -7.45058e-08, 0, 0.45, 2.38419e-07, -0.0975402, -0.0288435)

[node name="BedActivity" type="Node3D" parent="Activities"]
transform = Transform3D(-0.797046, 0, -0.603918, 0, 1, 0, 0.603918, 0, -0.797046, 0.782762, 0.0999995, 2.29748)
script = ExtResource("4_a3onc")

[node name="START_POINT" type="Node3D" parent="Activities/BedActivity"]
transform = Transform3D(0.999999, 0, -3.8743e-07, 0, 0.999999, 0, 8.9407e-08, 0, 0.999999, -0.644564, -0.0831673, 0.261748)

[node name="ACTIVITY_POINT" type="Node3D" parent="Activities/BedActivity"]
transform = Transform3D(1, 0, -2.38419e-07, 0, 1, 0, 5.96046e-08, 0, 1, -0.000793219, 0.200576, 0.182067)

[node name="ZZZParticles" type="GPUParticles3D" parent="Activities/BedActivity"]
transform = Transform3D(0.999999, 0, 0, 0, 0.999999, 0, 1.49012e-07, 0, 1, -0.0305171, 0.477519, -0.313852)
emitting = false
amount = 4
lifetime = 1.2
visibility_aabb = AABB(-0.586999, -0.965922, -1.08275, 1.174, 1.93182, 2.16551)
transform_align = 3
trail_lifetime = 0.8
process_material = SubResource("ParticleProcessMaterial_v047h")
draw_pass_1 = SubResource("TextMesh_5yyk0")

[node name="bed" parent="Activities/BedActivity" instance=ExtResource("9_cqd85")]
transform = Transform3D(0.45, 0, 7.45058e-08, 0, 0.45, 0, -7.45058e-08, 0, 0.45, 2.38419e-07, -0.0975402, -0.0288435)

[node name="BedActivity2" type="Node3D" parent="Activities"]
transform = Transform3D(-0.797046, 0, -0.603918, 0, 1, 0, 0.603918, 0, -0.797046, 2.4227, 0.0999995, 2.60794)
script = ExtResource("4_a3onc")

[node name="START_POINT" type="Node3D" parent="Activities/BedActivity2"]
transform = Transform3D(0.999999, 0, -3.8743e-07, 0, 0.999999, 0, 8.9407e-08, 0, 0.999999, -0.644564, -0.0831673, 0.261748)

[node name="ACTIVITY_POINT" type="Node3D" parent="Activities/BedActivity2"]
transform = Transform3D(1, 0, -2.38419e-07, 0, 1, 0, 5.96046e-08, 0, 1, -0.000793219, 0.200576, 0.182067)

[node name="ZZZParticles" type="GPUParticles3D" parent="Activities/BedActivity2"]
transform = Transform3D(0.999999, 0, 0, 0, 0.999999, 0, 1.49012e-07, 0, 1, -0.0305171, 0.477519, -0.313852)
emitting = false
amount = 4
lifetime = 1.2
visibility_aabb = AABB(-0.586999, -0.965922, -1.08275, 1.174, 1.93182, 2.16551)
transform_align = 3
trail_lifetime = 0.8
process_material = SubResource("ParticleProcessMaterial_v047h")
draw_pass_1 = SubResource("TextMesh_5yyk0")

[node name="bed" parent="Activities/BedActivity2" instance=ExtResource("9_cqd85")]
transform = Transform3D(0.45, 0, 7.45058e-08, 0, 0.45, 0, -7.45058e-08, 0, 0.45, 2.38419e-07, -0.0975402, -0.0288435)

[node name="BedActivity3" type="Node3D" parent="Activities"]
transform = Transform3D(0.0317775, 0, -0.999495, 0, 1, 0, 0.999495, 0, 0.0317775, 2.22266, 0.111173, 0.175562)
script = ExtResource("4_a3onc")

[node name="START_POINT" type="Node3D" parent="Activities/BedActivity3"]
transform = Transform3D(0.999999, 0, -3.8743e-07, 0, 0.999999, 0, 8.9407e-08, 0, 0.999999, -0.644564, -0.0831673, 0.261748)

[node name="ACTIVITY_POINT" type="Node3D" parent="Activities/BedActivity3"]
transform = Transform3D(1, 0, -2.38419e-07, 0, 1, 0, 5.96046e-08, 0, 1, -0.000793219, 0.200576, 0.182067)

[node name="ZZZParticles" type="GPUParticles3D" parent="Activities/BedActivity3"]
transform = Transform3D(0.999999, 0, 0, 0, 0.999999, 0, 1.49012e-07, 0, 1, -0.0305171, 0.477519, -0.313852)
emitting = false
amount = 4
lifetime = 1.2
visibility_aabb = AABB(-0.586999, -0.965922, -1.08275, 1.174, 1.93182, 2.16551)
transform_align = 3
trail_lifetime = 0.8
process_material = SubResource("ParticleProcessMaterial_v047h")
draw_pass_1 = SubResource("TextMesh_5yyk0")

[node name="bed" parent="Activities/BedActivity3" instance=ExtResource("9_cqd85")]
transform = Transform3D(0.45, 0, 7.45058e-08, 0, 0.45, 0, -7.45058e-08, 0, 0.45, 2.38419e-07, -0.0975402, -0.0288435)

[node name="LeavePoint" type="MeshInstance3D" parent="Activities"]
transform = Transform3D(0.613582, 0, 0.789631, 0, 1, 0, -0.789631, 0, 0.613582, -0.459597, 0, -2.88418)
script = ExtResource("6_pdokr")

[node name="START_POINT" type="Node3D" parent="Activities/LeavePoint"]

[node name="ACTIVITY_POINT" type="Node3D" parent="Activities/LeavePoint"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -10, 0)

[node name="Requests" type="Node" parent="."]
unique_name_in_owner = true
script = ExtResource("6_abixe")

[node name="Timers" type="Node" parent="."]
unique_name_in_owner = true
script = ExtResource("2_dls8v")

[node name="Adventurers" type="Node" parent="."]
unique_name_in_owner = true
script = ExtResource("3_q8kab")

[node name="Agents" type="Node" parent="."]
unique_name_in_owner = true
script = ExtResource("4_uo78h")

[node name="UI" parent="." instance=ExtResource("6_xnocw")]

[node name="SCENE_CAM" type="Camera3D" parent="."]
transform = Transform3D(0.752082, -0.437961, 0.492507, 1.49012e-08, 0.747276, 0.664514, -0.65907, -0.499768, 0.562013, 3.68466, 4.69661, 4.25957)
environment = SubResource("Environment_wun1a")
current = true
fov = 70.8
size = 3.65732

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.73392, 3.4996e-07, -0.679236, 0.63007, 0.373538, 0.680795, 0.253721, -0.927615, 0.274147, 0, 3.7599, 1.23124)
light_color = Color(0.682353, 0.768627, 0.968627, 1)
light_energy = 1.15
shadow_enabled = true
shadow_bias = 0.056
shadow_normal_bias = 2.531
shadow_transmittance_bias = -9.72
shadow_opacity = 0.6
shadow_blur = 2.15
directional_shadow_mode = 0
directional_shadow_split_1 = 0.254
directional_shadow_fade_start = 0.93
directional_shadow_max_distance = 13.6
directional_shadow_pancake_size = 3.3

[node name="MAP_OBJECTS" type="Node3D" parent="."]

[node name="COLLISIONS" type="NavigationRegion3D" parent="MAP_OBJECTS"]
navigation_mesh = SubResource("NavigationMesh_av4e2")

[node name="MeshInstance3D" type="MeshInstance3D" parent="MAP_OBJECTS/COLLISIONS"]
transform = Transform3D(10, 0, 0, 0, 10, 0, 0, 0, 10, 0, 0, 0)
mesh = SubResource("PlaneMesh_wambb")
skeleton = NodePath("../../..")

[node name="dining_table" parent="MAP_OBJECTS/COLLISIONS" instance=ExtResource("17_1jl0l")]
transform = Transform3D(0.998114, 0, 0.0613796, 0, 1, 0, -0.0613796, 0, 0.998114, -1.22065, 0, -0.596028)

[node name="wall_p_1" parent="MAP_OBJECTS/COLLISIONS" instance=ExtResource("18_p63jj")]
transform = Transform3D(0.0293349, 0, -0.99957, 0, 1, 0, 0.99957, 0, 0.0293349, -2.51366, -0.339607, 2.07972)

[node name="wall_p_2" parent="MAP_OBJECTS/COLLISIONS" instance=ExtResource("18_p63jj")]
transform = Transform3D(0.0293349, 0, -0.99957, 0, 1, 0, 0.99957, 0, 0.0293349, -2.5698, -0.339607, 0.294778)

[node name="wall_p_3" parent="MAP_OBJECTS/COLLISIONS" instance=ExtResource("18_p63jj")]
transform = Transform3D(0.0293349, 0, -0.99957, 0, 1, 0, 0.99957, 0, 0.0293349, -2.62167, -0.339607, -1.49942)

[node name="FURNITURE_NO_COL" type="Node3D" parent="MAP_OBJECTS"]
transform = Transform3D(0.979113, 0, -0.203317, 0, 1, 0, 0.203317, 0, 0.979113, -0.468931, 0, 0.800919)

[node name="chair" parent="MAP_OBJECTS/FURNITURE_NO_COL" instance=ExtResource("16_d6hij")]
transform = Transform3D(-0.263031, 0, 0.964787, 0, 1, 0, -0.964787, 0, -0.263031, -0.454266, 0, -0.60273)

[node name="chair2" parent="MAP_OBJECTS/FURNITURE_NO_COL" instance=ExtResource("16_d6hij")]
transform = Transform3D(-0.263031, 0, 0.964787, 0, 1, 0, -0.964787, 0, -0.263031, -1.20577, 0, -0.397847)

[node name="chair3" parent="MAP_OBJECTS/FURNITURE_NO_COL" instance=ExtResource("16_d6hij")]
transform = Transform3D(0.263031, 0, -0.964787, 0, 1, 0, 0.964787, 0, 0.263031, -0.846198, 0, -2.04032)

[node name="chair4" parent="MAP_OBJECTS/FURNITURE_NO_COL" instance=ExtResource("16_d6hij")]
transform = Transform3D(0.263031, 0, -0.964787, 0, 1, 0, 0.964787, 0, 0.263031, -1.5977, 0, -1.83544)

[connection signal="load_game" from="DataStore" to="Game" method="_on_load_game"]
[connection signal="load_game" from="DataStore" to="Activities" method="_on_load_game"]
[connection signal="load_game" from="DataStore" to="Requests" method="_on_load_game"]
[connection signal="load_game" from="DataStore" to="Timers" method="_on_load_game"]
[connection signal="load_game" from="DataStore" to="Adventurers" method="_on_load_game"]
[connection signal="load_game" from="DataStore" to="Agents" method="_on_load_game"]
[connection signal="save_game" from="DataStore" to="Game" method="_on_save_game"]
[connection signal="save_game" from="DataStore" to="Activities" method="_on_save_game"]
[connection signal="save_game" from="DataStore" to="Requests" method="_on_save_game"]
[connection signal="save_game" from="DataStore" to="Timers" method="_on_save_game"]
[connection signal="save_game" from="DataStore" to="Adventurers" method="_on_save_game"]
[connection signal="save_game" from="DataStore" to="Agents" method="_on_save_game"]
